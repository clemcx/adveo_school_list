(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{515:function(e,t,r){var content=r(521);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(113).default)("67b34f26",content,!0,{sourceMap:!1})},520:function(e,t,r){"use strict";r(515)},521:function(e,t,r){var n=r(112)(!1);n.push([e.i,"body[data-v-0b97e0ee]{height:100vh}.container[data-v-0b97e0ee]{display:inline-flex;padding:.5em;min-width:100%;position:relative}.container[data-v-0b97e0ee],.header[data-v-0b97e0ee]{justify-content:center}.header[data-v-0b97e0ee]{align-items:center;margin-top:1em;margin-bottom:.5em;padding-left:10em;padding-right:10em}hr[data-v-0b97e0ee]{margin:0;width:20%;height:1px;background-color:#dfdfdf}hr.pageActive[data-v-0b97e0ee]{width:20%;height:4px;background-color:#c2dcd9}.header div[data-v-0b97e0ee]{height:40px;width:40px;border:1px solid #c2dcd9;border-radius:50%;text-align:center!important;display:table-cell;overflow:hidden;vertical-align:middle}.stepNumber[data-v-0b97e0ee]{font-family:Quicksand;font-size:20px}.pageTitleActive[data-v-0b97e0ee]{background-color:#c2dcd9;color:#fff}.pageTitleNext[data-v-0b97e0ee]{background-color:#d3d4d4}#tableProduct[data-v-0b97e0ee]{height:80vh;overflow-y:scroll}.list-group-item[data-v-0b97e0ee]{display:flex;margin-top:5px;border-radius:7px;border:1px solid #c2dcd9;padding:.1em .5em;justify-content:space-around;align-items:center}li[data-v-0b97e0ee]:nth-child(odd){background:rgba(194,220,217,.459)}.referenceItem[data-v-0b97e0ee]{justify-content:center}#listTotal[data-v-0b97e0ee],.referenceItem[data-v-0b97e0ee]{display:flex;align-items:center}#listTotal[data-v-0b97e0ee]{padding:.5em}.validationFooter[data-v-0b97e0ee]{align-items:center;bottom:0}.listTotalContent[data-v-0b97e0ee],.validationFooter[data-v-0b97e0ee]{display:flex;justify-content:space-around}.listTotalContent[data-v-0b97e0ee]{font-size:20px}.validationBtn[data-v-0b97e0ee]{border-radius:7px;color:#fff;background:#175951;font-family:Quicksand,sans-serif;font-weight:700;padding:1em;text-decoration:none}.validationBtn[data-v-0b97e0ee]:hover{background:#5ba39b;text-decoration:none}button[data-v-0b97e0ee]{margin-top:.5em;border-radius:5px;font-family:Quicksand,Geneva,Tahoma,sans-serif;font-family:var(--font-family);color:#fff;background:#c2dcd9;border:none}button[data-v-0b97e0ee],button[data-v-0b97e0ee]:hover{text-decoration:none}button[data-v-0b97e0ee]:hover{background:#5ba39b}.backBtn[data-v-0b97e0ee]{border-radius:5px;font-family:Quicksand,sans-serif;color:#c2dcd9;border:2px solid #c2dcd9;padding:1em;text-decoration:none}.backBtn[data-v-0b97e0ee]:hover{background:#5ba39b;color:#fff;text-decoration:none}.totalPrice[data-v-0b97e0ee]{display:flex;align-items:center}.totalPriceValue[data-v-0b97e0ee]{color:#619b94;font-size:25px;font-weight:700;margin-left:.5em}.trashButton[data-v-0b97e0ee]{height:24px;background-color:red;margin-bottom:.2em}[data-v-0b97e0ee]:root{--charter-green:#c2dcd9;--font-family:Quicksand,Geneva,Tahoma,sans-serif}.itemsWrapper[data-v-0b97e0ee]{display:flex;flex-direction:row}.itembox[data-v-0b97e0ee]{width:33%;margin:.3em;display:flex;flex-direction:column;border:2px solid #d3d3d3;background-color:#fff;align-items:center;border-radius:7px}.itembox[data-v-0b97e0ee]:hover{border:2px solid #c2dcd9}.noMatchItembox[data-v-0b97e0ee]{color:#999292;height:15vh;width:100%;margin:.5em;border-radius:7px;display:flex;border:1px solid #d3d3d3;background-color:#fdfbfb;align-items:center;justify-content:center}.suggestion[data-v-0b97e0ee]{width:25%;height:60px;cursor:pointer;overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none}.suggestion[data-v-0b97e0ee]::-webkit-scrollbar{display:none}p[data-v-0b97e0ee]{margin:0;font-size:12px}.selectedSuggestion[data-v-0b97e0ee]{border:2px solid #619b94}img[data-v-0b97e0ee]{padding:.5em}.choiceLabel[data-v-0b97e0ee]{width:100;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical}.chooseItemBtn[data-v-0b97e0ee]{font-weight:700;width:50%;font-size:15px}.totalPriceFail[data-v-0b97e0ee]{font-size:22px;font-weight:lighter;color:red}.isSuperior[data-v-0b97e0ee]{color:red}",""]),e.exports=n},527:function(e,t,r){"use strict";r.r(t);r(2),r(10),r(19),r(17),r(138),r(14),r(21),r(22),r(64),r(51),r(3),r(65),r(73),r(60);function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var l={data:function(){return{listpriceMax:0,listpriceMin:0,selectionList:[],totalQuantity:0,totalPrice:0,totalPriceSuperior:null,itemsTotal:0}},mounted:function(){var data=localStorage.getItem("referenceList"),e=JSON.parse(data);this.listpriceMax=localStorage.getItem("listPriceMax"),this.listpriceMin=localStorage.getItem("listPriceMin");var t=this;for(var r in e.forEach((function(e,r){var label=e.label.normalize("NFD").replace(/[\u0300-\u036f]/g,""),n="http://doors.retailshake.com:32178/products/_like_this?q=".concat(label,"&company_name=Calipage&limit=3");e.brands[0]&&(n+="&brand_name=".concat(e.brands[0])),e.maxPrice&&(n+="&price_range=0,".concat(e.maxPrice));var o=[];e.attributes.madeInFrance&&o.push("Made-in-France-Web"),e.attributes.eco&&o.push("Eco-responsable"),e.attributes.firstPrice&&o.push("1erPrix_Scolaire"),o.length>0&&(n+="&attributes=",o.forEach((function(e){return n+=e+","}))),t.$axios.get(n).then((function(r){var n=r.data.products.slice(0,3),o={reference_label:e.label,suggestions:[],quantity:e.quantity,reference_quantity:e.quantity};n.forEach((function(element){var e;o.suggestions.push({label:element.product_label,price:null===(e=element.last_recommended_price)||void 0===e?void 0:e.toFixed(2),brand:element.brand_name,sku:element.product_internal_ref,picture_url:element.product_picture_url,url:element.product_url})})),t.selectionList.push(o)})).catch((function(e){console.error(e)}))})),this.selectionList)for(var o in this.selectionList[r].suggestions)this.selectionList[r].suggestions[o].selected=!1;this.totalQuantity=this.selectionList.length;var l,c=n(this.selectionList);try{for(c.s();!(l=c.n()).done;){var d=l.value;this.itemsTotal+=d.quantity}}catch(e){c.e(e)}finally{c.f()}},methods:{updateTotalPrice:function(){this.totalPrice=0;var e,t=n(this.selectionList);try{for(t.s();!(e=t.n()).done;){var r,o=e.value,l=n(o.suggestions);try{for(l.s();!(r=l.n()).done;){var c=r.value;c.selected&&(this.totalPrice+=c.price*o.quantity)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){t.e(e)}finally{t.f()}},updateItemsTotal:function(){this.itemsTotal=0;var e,t=n(this.selectionList);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.itemsTotal+=parseInt(r.quantity)}}catch(e){t.e(e)}finally{t.f()}},selectItem:function(e,t){this.selectionList[t].suggestions.map((function(t){return t.sku===e?t.selected=!t.selected:t.selected=!1,t})),this.updateTotalPrice()},getLink:function(){var e=[];this.selectionList.forEach((function(t){t.suggestions.forEach((function(r){r.selected&&e.push({choice:r,quantity:t.quantity,reference:{reference_label:t.reference_label,product_quantity:t.reference_quantity}})}))})),localStorage.setItem("choicesList",JSON.stringify(e)),this.$router.push("/validation")}}},c=(r(520),r(74)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e._m(0),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"col-sm-12",attrs:{id:"tableProduct"}},[r("ul",{staticClass:"list-group",attrs:{id:"productsList"}},e._l(e.selectionList,(function(t,n){return r("li",{key:n,staticClass:"list-group-item"},[r("div",{staticClass:"referenceItem col-sm-2"},["Null"!==t.reference_quantity?r("p",[e._v("\n              "+e._s(t.reference_quantity)+" "+e._s(t.reference_label)+"\n            ")]):r("p",[e._v("\n              "+e._s(t.reference_label)+"\n            ")])]),e._v(" "),t.suggestions.length?r("div",{staticClass:"itemsWrapper col-sm-9"},e._l(t.suggestions,(function(t){return r("div",{key:t.sku,staticClass:"itembox",class:{selectedSuggestion:t.selected}},[r("div",{staticClass:"d-flex"},[r("a",{attrs:{href:t.url,target:"_blank",title:"voir le produit"}},[r("img",{attrs:{src:t.picture_url,height:"90",alt:""}})]),e._v(" "),r("div",{staticClass:"d-flex flex-column"},[r("p",{staticClass:"choiceLabel"},[e._v(e._s(t.label))]),e._v(" "),r("p",[e._v(e._s(t.sku))]),e._v(" "),r("p",[e._v(e._s(t.brand))]),e._v(" "),r("p",[e._v(e._s(t.price)+" €")])])]),e._v(" "),t.selected?r("button",{staticClass:"trashButton",on:{click:function(r){return e.selectItem(t.sku,n)}}},[r("TrashIcon")],1):r("button",{staticClass:"chooseItemBtn",on:{click:function(r){return e.selectItem(t.sku,n)}}},[e._v("\n                Choisir\n              ")])])})),0):r("div",{staticClass:"itemsWrapper col-sm-9"},[r("div",{staticClass:"noMatchItembox"},[e._v("Aucun produit correspondant")])]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"product.quantity"}],staticClass:"form-control",attrs:{type:"number",min:"0"},domProps:{value:t.quantity},on:{change:function(t){e.updateTotalPrice(),e.updateItemsTotal()},input:function(r){r.target.composing||e.$set(t,"quantity",r.target.value)}}})])])})),0)])]),e._v(" "),r("div",{staticClass:"validationFooter col-sm-12"},[r("a",{staticClass:"backBtn",attrs:{href:"/edition"}},[e._v(" RETOUR ")]),e._v(" "),r("div",{attrs:{id:"listTotal"}},[r("div",{staticClass:"listTotalContent"},[r("div",{staticClass:"totalPrice"},[r("div",{staticClass:"text-dark"},[e._v("Prix total :")]),e._v(" "),e.totalPrice>=0?r("div",{staticClass:"totalPriceValue",class:{isSuperior:e.totalPrice>e.listpriceMax}},[e._v("\n            "+e._s(e.totalPrice.toFixed(2))+" euros\n          ")]):r("div",{staticClass:"totalPriceFail"},[e._v("\n            Vérifiez que tous les produits sélectionnés ont une quantité\n          ")])])])]),e._v(" "),r("a",{staticClass:"validationBtn",on:{click:function(t){return e.getLink()}}},[e._v(" APPLIQUER ")])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header d-flex"},[r("div",{staticClass:"pageTitle"},[r("div",{staticClass:"stepNumber"},[e._v("1")])]),e._v(" "),r("hr",{staticClass:"pageActive"}),e._v(" "),r("div",{staticClass:"pageTitle"},[r("div",{staticClass:"stepNumber"},[e._v("2")])]),e._v(" "),r("hr",{staticClass:"new1"}),e._v(" "),r("div",{staticClass:"pageTitleActive"},[r("div",{staticClass:"stepNumber"},[e._v("3")])]),e._v(" "),r("hr",{staticClass:"new1"}),e._v(" "),r("div",{staticClass:"pageTitleNext"},[r("div",{staticClass:"stepNumber"},[e._v("4")])])])}],!1,null,"0b97e0ee",null);t.default=component.exports}}]);